"use strict";
var app = getApp();
Page({
    onLoad: function () {
    },
    data: {
        img1src: '',
        img2src: '',
        img3src: '',
        img4src: '',
        img5src: '',
        combineHeight: 0,
        combineWidth: 0,
    },
    formSubmit: function (e) {
        console.log('form发生了submit事件，携带数据为：', e.detail.value);
        var that = this;
        wx.showLoading({
            title: '下载中...',
            mask: true,
        });
        var fun = function () {
            wx.canvasToTempFilePath({
                canvasId: 'myCanvas',
                quality: 1,
                success: function (res) {
                    console.log("合成的带有小程序码的图片success》》》", res);
                    var tempFilePath = res.tempFilePath;
                    wx.saveImageToPhotosAlbum({
                        filePath: tempFilePath,
                        success: function () {
                            wx.hideLoading();
                            wx.showModal({
                                title: '温馨提示',
                                content: '图片保存成功，可在相册中查看',
                                showCancel: false,
                            });
                        },
                        fail: function (error) {
                            wx.showModal({
                                title: '温馨提示',
                                content: "\u56FE\u7247\u4FDD\u5B58\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5," + error,
                                showCancel: false
                            });
                        }
                    });
                    console.log("合成的带有小程序码的图片的信息》》》", res);
                },
                fail: function (error) {
                    console.log("生成的图拍呢 失败 fail fail fail ", error);
                    setTimeout(fun, 5 * 1000);
                }
            }, that);
        };
        setTimeout(fun, 0.5 * 1000);
    },
    formReset: function () {
        console.log('form发生了reset事件');
    },
    up1: function () {
        var _this = this;
        console.log('上传1');
        var that = this;
        wx.chooseImage({
            count: 5,
            sizeType: ['original', 'compressed'],
            sourceType: ['album', 'camera'],
            success: function (res) {
                wx.showLoading({
                    title: '上传中...',
                    mask: true,
                });
                var tempFilePaths = res.tempFilePaths;
                _this.setData({
                    img1src: tempFilePaths[0],
                    img2src: tempFilePaths[1],
                    img3src: tempFilePaths[2],
                    img4src: tempFilePaths[3],
                    img5src: tempFilePaths[4],
                });
                var ctx = wx.createCanvasContext("myCanvas", that);
                var drawText = ['11号 缪钰雯', '缪钰雯 爸爸', '缪钰雯 妈妈', '缪钰雯 奶奶', '缪钰雯 弟弟'];
                var i = 0;
                var imgWs = [];
                var imgHs = [];
                var imgPaths = [];
                for (var key in tempFilePaths) {
                    wx.getImageInfo({
                        src: tempFilePaths[key],
                        success: function (res) {
                            i++;
                            var imgW = res.width;
                            var imgH = res.height;
                            var imgPath = res.path;
                            imgWs.push(imgW);
                            imgHs.push(imgH);
                            imgPaths.push(imgPath);
                            if (i === drawText.length) {
                                that.setData({
                                    canvasWidth: imgW * drawText.length,
                                    canvasHeight: imgH,
                                });
                                ctx.font = "70px orbitron";
                                ctx.fillStyle = "red";
                                setTimeout(function () {
                                    for (var i_1 = 0; i_1 <= drawText.length; i_1++) {
                                        var dx = i_1 * imgW;
                                        ctx.drawImage(imgPaths[i_1], dx, 0, imgW, imgH);
                                        ctx.fillText(drawText[i_1], dx + 250, imgH - 176);
                                        ctx.draw(true);
                                    }
                                }, 1 * 1000);
                            }
                        }
                    });
                }
                console.log('上传成功');
                wx.hideLoading();
            }
        });
    },
    invokeClodFunction: function () {
        console.log('调用云函数 start');
        wx.cloud.init();
        wx.cloud.callFunction({
            name: 'add',
            data: {
                a: 1,
                b: 2,
            },
            complete: function (res) {
                console.log('callFunction test result: ', res);
            }
        });
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBRUEsSUFBTSxHQUFHLEdBQUcsTUFBTSxFQUFFLENBQUE7QUFDcEIsSUFBSSxDQUFDO0lBQ0QsTUFBTTtJQUVOLENBQUM7SUFDRCxJQUFJLEVBQUU7UUFDRixPQUFPLEVBQUUsRUFBRTtRQUNYLE9BQU8sRUFBRSxFQUFFO1FBQ1gsT0FBTyxFQUFFLEVBQUU7UUFDWCxPQUFPLEVBQUUsRUFBRTtRQUNYLE9BQU8sRUFBRSxFQUFFO1FBQ1gsYUFBYSxFQUFFLENBQUM7UUFDaEIsWUFBWSxFQUFFLENBQUM7S0FDbEI7SUFDRCxVQUFVLEVBQUUsVUFBVSxDQUFNO1FBQ3hCLE9BQU8sQ0FBQyxHQUFHLENBQUMsd0JBQXdCLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQTtRQUNyRCxJQUFNLElBQUksR0FBRyxJQUFJLENBQUM7UUFDbEIsRUFBRSxDQUFDLFdBQVcsQ0FBQztZQUNYLEtBQUssRUFBRSxRQUFRO1lBQ2YsSUFBSSxFQUFFLElBQUk7U0FDYixDQUFDLENBQUE7UUFDRixJQUFJLEdBQUcsR0FBRztZQUNOLEVBQUUsQ0FBQyxvQkFBb0IsQ0FBQztnQkFDcEIsUUFBUSxFQUFFLFVBQVU7Z0JBQ3BCLE9BQU8sRUFBRSxDQUFDO2dCQUNWLE9BQU8sRUFBRSxVQUFVLEdBQUc7b0JBQ2xCLE9BQU8sQ0FBQyxHQUFHLENBQUMsd0JBQXdCLEVBQUUsR0FBRyxDQUFDLENBQUE7b0JBQzFDLElBQUksWUFBWSxHQUFHLEdBQUcsQ0FBQyxZQUFZLENBQUE7b0JBRW5DLEVBQUUsQ0FBQyxzQkFBc0IsQ0FBQzt3QkFDdEIsUUFBUSxFQUFFLFlBQVk7d0JBQ3RCLE9BQU87NEJBQ0gsRUFBRSxDQUFDLFdBQVcsRUFBRSxDQUFDOzRCQUNqQixFQUFFLENBQUMsU0FBUyxDQUFDO2dDQUNULEtBQUssRUFBRSxNQUFNO2dDQUNiLE9B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T0FBTyxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsQ0FBQTtRQUMxQixFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDO1FBQ2hCLEVBQUUsQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDO1lBQ2xCLElBQUksRUFBRSxLQUFLO1lBQ1gsSUFBSSxFQUFFO2dCQUNGLENBQUMsRUFBRSxDQUFDO2dCQUNKLENBQUMsRUFBRSxDQUFDO2FBQ1A7WUFDRCxRQUFRLEVBQUUsVUFBQSxHQUFHO2dCQUNULE9BQU8sQ0FBQyxHQUFHLENBQUMsNEJBQTRCLEVBQUUsR0FBRyxDQUFDLENBQUE7WUFDbEQsQ0FBQztTQUNKLENBQUMsQ0FBQTtJQUNOLENBQUM7Q0FDSixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBpbmRleC50c1xuLy8g6I635Y+W5bqU55So5a6e5L6LXG5jb25zdCBhcHAgPSBnZXRBcHAoKVxuUGFnZSh7XG4gICAgb25Mb2FkKCkge1xuXG4gICAgfSxcbiAgICBkYXRhOiB7XG4gICAgICAgIGltZzFzcmM6ICcnLFxuICAgICAgICBpbWcyc3JjOiAnJyxcbiAgICAgICAgaW1nM3NyYzogJycsXG4gICAgICAgIGltZzRzcmM6ICcnLFxuICAgICAgICBpbWc1c3JjOiAnJyxcbiAgICAgICAgY29tYmluZUhlaWdodDogMCxcbiAgICAgICAgY29tYmluZVdpZHRoOiAwLFxuICAgIH0sXG4gICAgZm9ybVN1Ym1pdDogZnVuY3Rpb24gKGU6IGFueSkge1xuICAgICAgICBjb25zb2xlLmxvZygnZm9ybeWPkeeUn+S6hnN1Ym1pdOS6i+S7tu+8jOaQuuW4puaVsOaNruS4uu+8micsIGUuZGV0YWlsLnZhbHVlKVxuICAgICAgICBjb25zdCB0aGF0ID0gdGhpcztcbiAgICAgICAgd3guc2hvd0xvYWRpbmcoe1xuICAgICAgICAgICAgdGl0bGU6ICfkuIvovb3kuK0uLi4nLFxuICAgICAgICAgICAgbWFzazogdHJ1ZSxcbiAgICAgICAgfSlcbiAgICAgICAgbGV0IGZ1biA9ICgpID0+IHtcbiAgICAgICAgICAgIHd4LmNhbnZhc1RvVGVtcEZpbGVQYXRoKHtcbiAgICAgICAgICAgICAgICBjYW52YXNJZDogJ215Q2FudmFzJyxcbiAgICAgICAgICAgICAgICBxdWFsaXR5OiAxLFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLlkIjmiJDnmoTluKbmnInlsI/nqIvluo/noIHnmoTlm77niYdzdWNjZXNz44CL44CL44CLXCIsIHJlcylcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRlbXBGaWxlUGF0aCA9IHJlcy50ZW1wRmlsZVBhdGhcbiAgICAgICAgICAgICAgICAgICAgLy8g5L+d5a2Y5Yiw55u45YaMXG4gICAgICAgICAgICAgICAgICAgIHd4LnNhdmVJbWFnZVRvUGhvdG9zQWxidW0oe1xuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZVBhdGg6IHRlbXBGaWxlUGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3MoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd3guaGlkZUxvYWRpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3eC5zaG93TW9kYWwoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+a4qemmqOaPkOekuicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICflm77niYfkv53lrZjmiJDlip/vvIzlj6/lnKjnm7jlhozkuK3mn6XnnIsnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93Q2FuY2VsOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhaWwoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3eC5zaG93TW9kYWwoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+a4qemmqOaPkOekuicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGDlm77niYfkv53lrZjlpLHotKXvvIzor7fph43or5UsJHtlcnJvcn1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93Q2FuY2VsOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5ZCI5oiQ55qE5bim5pyJ5bCP56iL5bqP56CB55qE5Zu+54mH55qE5L+h5oGv44CL44CL44CLXCIsIHJlcylcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGZhaWw6IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIueUn+aIkOeahOWbvuaLjeWRoiDlpLHotKUgZmFpbCBmYWlsIGZhaWwgXCIsIGVycm9yKVxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1biwgNSAqIDEwMDApXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgdGhhdClcbiAgICAgICAgfVxuICAgICAgICBzZXRUaW1lb3V0KGZ1biwgMC41ICogMTAwMClcbiAgICB9LFxuICAgIGZvcm1SZXNldDogZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zb2xlLmxvZygnZm9ybeWPkeeUn+S6hnJlc2V05LqL5Lu2JylcbiAgICB9LFxuICAgIHVwMTogZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zb2xlLmxvZygn5LiK5LygMScpXG4gICAgICAgIGNvbnN0IHRoYXQgPSB0aGlzO1xuICAgICAgICB3eC5jaG9vc2VJbWFnZSh7XG4gICAgICAgICAgICBjb3VudDogNSxcbiAgICAgICAgICAgIHNpemVUeXBlOiBbJ29yaWdpbmFsJywgJ2NvbXByZXNzZWQnXSxcbiAgICAgICAgICAgIHNvdXJjZVR5cGU6IFsnYWxidW0nLCAnY2FtZXJhJ10sXG4gICAgICAgICAgICBzdWNjZXNzOiAocmVzKSA9PiB7XG4gICAgICAgICAgICAgICAgd3guc2hvd0xvYWRpbmcoe1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+S4iuS8oOS4rS4uLicsXG4gICAgICAgICAgICAgICAgICAgIG1hc2s6IHRydWUsXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAvLyB0ZW1wRmlsZVBhdGjlj6/ku6XkvZzkuLppbWfmoIfnrb7nmoRzcmPlsZ7mgKfmmL7npLrlm77niYdcbiAgICAgICAgICAgICAgICBjb25zdCB0ZW1wRmlsZVBhdGhzID0gcmVzLnRlbXBGaWxlUGF0aHNcbiAgICAgICAgICAgICAgICB0aGlzLnNldERhdGEoe1xuICAgICAgICAgICAgICAgICAgICBpbWcxc3JjOiB0ZW1wRmlsZVBhdGhzWzBdLFxuICAgICAgICAgICAgICAgICAgICBpbWcyc3JjOiB0ZW1wRmlsZVBhdGhzWzFdLFxuICAgICAgICAgICAgICAgICAgICBpbWczc3JjOiB0ZW1wRmlsZVBhdGhzWzJdLFxuICAgICAgICAgICAgICAgICAgICBpbWc0c3JjOiB0ZW1wRmlsZVBhdGhzWzNdLFxuICAgICAgICAgICAgICAgICAgICBpbWc1c3JjOiB0ZW1wRmlsZVBhdGhzWzRdLFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLy8g5Yib5bu655S75biD5a+56LGhXG4gICAgICAgICAgICAgICAgY29uc3QgY3R4ID0gd3guY3JlYXRlQ2FudmFzQ29udGV4dChcIm15Q2FudmFzXCIsIHRoYXQpXG4gICAgICAgICAgICAgICAgLy8g6I635Y+W5Zu+54mH5L+h5oGv77yM6KaB5oyJ54Wn5Y6f5Zu+5p2l57uY5Yi277yM5ZCm5YiZ5Zu+54mH5Lya5Y+Y5b2iXG4gICAgICAgICAgICAgICAgbGV0IGRyYXdUZXh0ID0gWycxMeWPtyDnvKrpkrDpm68nLCAn57yq6ZKw6ZuvIOeIuOeIuCcsICfnvKrpkrDpm68g5aaI5aaIJywgJ+e8qumSsOmbryDlpbblpbYnLCAn57yq6ZKw6ZuvIOW8n+W8nyddO1xuICAgICAgICAgICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgICAgICAgICBsZXQgaW1nV3MgPSBbXTtcbiAgICAgICAgICAgICAgICBsZXQgaW1nSHMgPSBbXTtcbiAgICAgICAgICAgICAgICBsZXQgaW1nUGF0aHMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gdGVtcEZpbGVQYXRocykge1xuICAgICAgICAgICAgICAgICAgICB3eC5nZXRJbWFnZUluZm8oe1xuICAgICAgICAgICAgICAgICAgICAgICAgc3JjOiB0ZW1wRmlsZVBhdGhzW2tleV0sXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiByZXMgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbWdXID0gcmVzLndpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGltZ0ggPSByZXMuaGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGltZ1BhdGggPSByZXMucGF0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdXcy5wdXNoKGltZ1cpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nSHMucHVzaChpbWdIKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ1BhdGhzLnB1c2goaW1nUGF0aClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gZHJhd1RleHQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuc2V0RGF0YSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW52YXNXaWR0aDogaW1nVyAqIGRyYXdUZXh0Lmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhc0hlaWdodDogaW1nSCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZvbnQgPSBcIjcwcHggb3JiaXRyb25cIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IFwicmVkXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gZHJhd1RleHQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkeDogbnVtYmVyID0gaSAqIGltZ1c7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShpbWdQYXRoc1tpXSwgZHgsIDAsIGltZ1csIGltZ0gpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KGRyYXdUZXh0W2ldLCBkeCArIDI1MCwgaW1nSCAtIDE3Nik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmRyYXcodHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMSAqIDEwMDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5LiK5Lyg5oiQ5YqfJylcbiAgICAgICAgICAgICAgICB3eC5oaWRlTG9hZGluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH0sXG4gICAgaW52b2tlQ2xvZEZ1bmN0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfosIPnlKjkupHlh73mlbAgc3RhcnQnKVxuICAgICAgICB3eC5jbG91ZC5pbml0KCk7XG4gICAgICAgIHd4LmNsb3VkLmNhbGxGdW5jdGlvbih7XG4gICAgICAgICAgICBuYW1lOiAnYWRkJyxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBhOiAxLFxuICAgICAgICAgICAgICAgIGI6IDIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29tcGxldGU6IHJlcyA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2NhbGxGdW5jdGlvbiB0ZXN0IHJlc3VsdDogJywgcmVzKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cbn0pXG4iXX0=